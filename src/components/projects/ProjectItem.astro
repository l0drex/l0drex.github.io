---
import colors from "../../languageColors.json"
import { dateFormatter } from "@utils/general";

interface Props {
  project: any,
  href: string
}

const {project, href} = Astro.props;

const lang = project.languages?.at(0) ?? '';

const fallbackColor = "#646464";
let color: string = fallbackColor;
if (lang != null && lang in colors) {
  color = colors[lang as keyof typeof colors]?.color ?? fallbackColor;
}

// quick fix
if (lang === "C++") {
  color = colors["C++"].color;
}
---

<li class="flex-shrink-0 w-52 h-52 rounded-lg py-1 px-1
hover:shadow-md hover:scale-105 transition-all active:scale-95
bg-[var(--theme)] text-white border-[var(--theme)]">
    <a href={href} class="flex flex-col h-full hover:no-underline">
        <h2 class="font-extrabold mx-1">{project.title}</h2>
        <p class="p-2 flex-grow rounded-md mt-1 
        bg-white bg-opacity-95 text-[var(--theme)]
        dark:bg-black dark:bg-opacity-70">
          {project.description}
        </p>
        <div class="flex justify-between pt-1 mx-2">
            <span class="m-0 fork">{lang}</span>
            <span class="m-0 lang">{dateFormatter(project.date, true)}</span>
        </div>
    </a>
</li>

<style define:vars={{theme: color}}>
</style>
