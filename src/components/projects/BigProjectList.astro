---
import { ProjectType } from "@utils/projects.ts";
import { getCollection, type CollectionEntry } from "astro:content";
import BigProjectItem from "@components/projects/BigProjectItem.astro";

interface Props {
  limit?: number;
  type: ProjectType
}

const {limit, type} = Astro.props;

const collection: CollectionEntry<"projects">[] = await getCollection('projects');
let projects = collection
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .filter(p => p.data.type === type && !p.data.small);

if (limit != null) {
  projects = projects.filter((r, i) => i < limit);
}
---

<ul class="flex gap-4 p-2 justify-between overflow-x-auto max-w-full pb-4
md:grid md:justify-items-center md:grid-cols-3 md:grid-flow-dense">
  {projects.map(p =>
    <BigProjectItem project={p.data} href={'/projects/' + p.slug} />
  )}
</ul>
