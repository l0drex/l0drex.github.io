---
import type { CollectionEntry } from "astro:content";
import { dateFormatter } from "@utils/general";
import LanguageTag from "./LanguageTag.astro";
import Card from "@components/Card.astro";

interface Props {
  project: CollectionEntry<"projects">["data"];
  href: string;
}

const { project, href } = Astro.props;

const color: string = project.color ?? "oklch(82.8% 0.111 230.318)";
const colorDark: string = project.colorDark ?? "oklch(35.9% 0.144 278.697)";

const lang = project.languages?.at(0) ?? "";
---

<li class="mb-2 h-48 w-52 shrink">
  <Card>
    <div slot="background" class="size-full bg-white dark:bg-gray-700">
      <div
        class="size-full bg-linear-to-t from-(--color)/20 from-10% to-transparent to-60% dark:from-(--colorDark)/40"
      >
      </div>
    </div>

    <a href={href} class="flex h-full flex-col justify-between gap-2 p-2">
      <div class="flex justify-between text-gray-500 dark:text-gray-300">
        <LanguageTag lang={lang} />
        <div>{dateFormatter(project.date, true)}</div>
      </div>
      <p class="mx-1">
        {project.description}
      </p>
      <div class="h-3"></div>
    </a>

    <h2
      slot="outside"
      class="relative bottom-13 mx-auto w-min rounded-lg border border-gray-300 bg-(--color) px-4 py-2 text-center text-lg font-extrabold whitespace-nowrap dark:border-gray-600 dark:bg-(--colorDark)"
    >
      {project.title}
    </h2>
  </Card>
</li>

<style define:vars={{ color, colorDark }}></style>
